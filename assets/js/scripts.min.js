window.Fluidvids=function(e,t){"use strict";var n,o,a=t.head||t.getElementsByTagName("head")[0],i=".fluidvids-elem{position:absolute;top:0px;left:0px;max-width:800px;max-height:501px;width:100%;height:100%;}.fluidvids{max-width:800px;max-height:501px;width:100%;position:relative;}",l=function(e){return n=new RegExp("^(https?:)?//(?:"+o.join("|")+").*$","i"),n.test(e)},r=function(e,t,n){var o;return function(){var a=this,i=arguments;clearTimeout(o),o=setTimeout(function(){o=null,n||e.apply(a,i)},t),n&&!o&&e.apply(a,i)}},s=function(e){var n=t.createElement("div"),o=e.parentNode,a=parseInt(e.height?e.height:e.offsetHeight,10),i=parseInt(e.width?e.width:e.offsetWidth,10),l=a/i*100;o.insertBefore(n,e),e.className+=" fluidvids-elem",n.className+=" fluidvids",n.style.paddingTop=l+"%";var r=parseInt(n.height?n.height:n.offsetHeight);r>=501&&(n.style.paddingTop="501px"),n.appendChild(e)},c=r(function(){for(var e=t.querySelectorAll(".fluidvids"),n=0;n<e.length;n++){var o=e[n].querySelectorAll("iframe")[0],a=parseInt(o.height?o.height:o.offsetHeight,10),i=parseInt(o.width?o.width:o.offsetWidth,10),l=a/i*100;e[n].style.paddingTop=l+"%";var r=parseInt(e[n].height?e[n].height:e[n].offsetHeight);r>=501&&(e[n].style.paddingTop="501px")}},250);e.addEventListener("resize",c);var u=function(){var e=t.createElement("div");e.innerHTML="<p>x</p><style>"+i+"</style>",a.appendChild(e.childNodes[1])},d=function(e){var n=e||{},a=n.selector||"iframe";o=n.players||["www.youtube.com","player.vimeo.com"];for(var i=t.querySelectorAll(a),r=0;r<i.length;r++){var c=i[r];l(c.src)&&s(c)}u()};return{init:d}}(window,document),function(e,t){function n(){for(var e=t.querySelectorAll(".portfolio-list li a"),n=0;n<e.length;n++)T(e[n],J(),Z)}function o(){var e=t.getElementById("js-project-link");e&&T(e,z(),Z);var n=t.getElementById("js-next"),o=t.getElementById("js-previous");n&&T(n,z(),ot),o&&T(o,z(),at)}function a(n){G=!0,clearInterval($),N.setAttribute("class","container"),N.innerHTML="";var o=t.querySelectorAll(".portfolio-list")[0];o&&o.parentNode.removeChild(o);var a=j.querySelectorAll("li");b(k,"white")&&(A(k,"white"),A(C,"white")),O=!1,H.style.display="block",H.style.width="10%",I(q,/\url-\S+/g),E(q,"url-"+S(n));for(var i=0;i<a.length;i++){A(a[i],"sel");var l=a[i].getElementsByTagName("a")[0].getAttribute("href");"/"!==l||"/"!==e.location.pathname&&-1===e.location.pathname.indexOf("/portfolio/")||E(a[i],"sel"),"/about"===l&&"/about"===e.location.pathname&&"/about/"===e.location.pathname&&E(a[i],"sel")}"/"===n||"/index.html"===n?u(n):n.match(/portfolio/)?d(n):p(n)}function i(){var n=function(n){var o=this.parentNode.nextSibling.nextSibling.getBoundingClientRect().top,a=o+r().scrollTop;t.documentElement.scrollTop?r().scrollTop=a:e.scrollBy(0,a),n.preventDefault()},o=t.querySelectorAll(".arrow-down")[0];T(o,z(),n)}function l(){t.body.scrollTop=0}function r(){return t.documentElement||t.body}function s(){clearInterval($),$=setInterval(function(){A(q,"boom"),setTimeout(function(){y(25,H),c(P,"next")},700)},12e3)}function c(e,n){clearInterval(R),e="previous"===n?e-=1:e+=1,e=e>X.length-1?0:e,e=0>e?X.length-1:e;var a=!1;P=e,N.setAttribute("class","container "+X[e].homestyle);for(var i=N.querySelectorAll("img"),l=0;l<i.length;l++)i[l].style.display="none";var r=t.getElementById(X[e].homestyle);if(r)a=!0;else{var s=new Image;s.src=x+X[e].homeimage,s.id=X[e].homestyle,s.className="js-img",s.alt="homepage project image",N.appendChild(s)}r=t.getElementById(X[e].homestyle);var c=t.getElementById("js-project-link"),u=t.getElementById("js-next"),d=t.getElementById("js-previous");u.setAttribute("data-index",e),d.setAttribute("data-index",e),c.setAttribute("href",X[e].slug),X[e].whitenav?(E(k,"white"),E(C,"white"),O=!0):(A(k,"white"),A(C,"white"),O=!1);var p=50;if(R=setInterval(function(){p+=5,y(p,H)},1e3),a)E(q,"boom"),clearInterval(R),y(100,H),r.style.display="inline-block",r.style.opacity=1;else{var s=new Image;s.onload=function(){E(q,"boom"),clearInterval(R),y(100,H),r.style.display="inline-block",r.style.opacity=1},s.src=r.getAttribute("src")}o()}function u(o){var a=new XMLHttpRequest;a.addEventListener("progress",function(e){v(e,H)},!1),a.open("GET","/partials/portfolio.html"),a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){t.title="Mike Kus • "+t.querySelectorAll(".page-foot__strap")[0].innerHTML,y(100,H),N.innerHTML=a.responseText;for(var i=N.querySelectorAll("img"),r=0;r<i.length;r++)g(i[r],80*r);n(),l()}else e.location.href=o},a.send()}function d(n){var o=0,a=0,r=75,s="/collections/"+n.replace("/portfolio/","")+".json",c=new XMLHttpRequest;c.addEventListener("progress",function(e){v(e,H)},!1),c.open("GET",s),c.onreadystatechange=function(){if(4===c.readyState)if(200===c.status){y(75,H);var s=JSON.parse(c.responseText);N.innerHTML=s.collection[0].body,o=N.querySelectorAll("img").length,a=Math.ceil(25/o),t.title="Portfolio: "+s.collection[0].title+" : Mike Kus • "+t.querySelectorAll(".page-foot__strap")[0].innerHTML;for(var u=N.querySelectorAll("img"),d=[],p=0,f=0;f<u.length;f++)d[f]=new Image,d[f].onload=function(){if(p++,r+=a,y(r,H),p===u.length-1){l(),y(100,H),t.querySelectorAll(".portfolio-item__header")[0].innerHTML+='<a class="arrow-down" href="#jump" id="jump"></a>',i();for(var e=N.querySelectorAll("section"),n=0;n<e.length;n++)e[n].style.opacity=1}},d[f].src=u[f].getAttribute("src");G=!1,Fluidvids.init({selector:"iframe",players:["www.youtube.com","player.vimeo.com"]})}else e.location.href=n},c.send()}function p(n){var o=new XMLHttpRequest;o.addEventListener("progress",function(e){v(e,H)},!1),o.open("GET","/partials"+n+".html"),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){if(t.title="Mike Kus • "+t.querySelectorAll(".page-foot__strap")[0].innerHTML,y(100,H),N.innerHTML=o.responseText,l(),("/about"===n||"/about/"===n)&&(t.querySelectorAll(".portfolio-item__header")[0].innerHTML+='<a class="arrow-down" href="#jump" id="jump"></a>',i()),"/about"===n||"/about/"===n){var a=t.getElementById("js-get-in-touch");a&&a.addEventListener(z(),Z,!1);var r=0,s=0,c=0;lt=N.querySelectorAll("img"),r=lt.length,s=Math.ceil(100/r);for(var u=0;u<lt.length;u++)c+=s,y(c,H),m(lt[u],80*u,c);for(var d=t.querySelectorAll(".portfolio-list li img"),u=0;u<d.length;u++)g(d[u],80*u)}}else e.location.href=n},o.send()}function f(){var e=h(t.getElementsByTagName("html")[0],"max-width").replace("px",""),n=t.querySelectorAll("meta[name=viewport]")[0];"none"!=e?n.setAttribute("content","width="+e+",initial-scale=1"):n.setAttribute("content","width=device-width,initial-scale=1")}function h(e,n){var o,a=(e.ownerDocument||t).defaultView;return a&&a.getComputedStyle?(n=n.replace(/([A-Z])/g,"-$1").toLowerCase(),a.getComputedStyle(e,null).getPropertyValue(n)):e.currentStyle?(n=n.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),o=e.currentStyle[n],/^\d+(em|pt|%|ex)?$/i.test(o)?function(t){var n=e.style.left,o=e.runtimeStyle.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left=t||0,t=e.style.pixelLeft+"px",e.style.left=n,e.runtimeStyle.left=o,t}(o):o):void 0}function m(e,t,n){var o=new Image;o.onload=function(){if(n)for(var e=N.querySelectorAll("section"),t=0;t<e.length;t++)e[t].style.opacity=1},o.src=e.getAttribute("src")}function g(e,t){var n=new Image;n.onload=function(){setTimeout(function(){e.style.opacity=1},t)},n.src=e.getAttribute("src")}function v(e,t){e.lengthComputable?t.style.width=e.loaded/e.total*100+"%":y(50,t)}function y(e,t){t.style.width=e+"%",e>=100&&setTimeout(function(){t.style.display="none"},350)}function w(t){"pushState"in history?history.pushState(null,null,t):e.location.href=t}function b(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")}function E(e,t){e&&!b(e,t)&&(e.className+=" "+t)}function A(e,t){var n=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(b(e,t)){for(;n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className=n.replace(/^\s+|\s+$/g,"")}}function I(e,t){var n=e.className.match(t);A(e,n)}function S(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}function T(t,n,o){e.addEventListener?t.addEventListener(n,o,!1):t.attachEvent("on"+n,o)}var x="",L=t.getElementsByTagName("body")[0],j=t.getElementById("js-menu-nav"),B=t.getElementById("js-social-nav");L.innerHTML+='<div id="page-loader" style="display: none;"></div>';var q=t.getElementsByTagName("html")[0],M=t.getElementById("js-overlay"),H=t.getElementById("page-loader"),N=t.getElementById("js-content-block"),k=t.getElementById("js-page-head"),C=t.getElementById("js-project-nav"),_=t.getElementById("js-footer-nav"),D=t.getElementById("js-menu");j=t.getElementById("js-menu-nav"),B=t.getElementById("js-social-nav");var R,$,F=!1,G=!1,K=location.href,O=b(k,"white"),X=[],P=0;if(!b(q,"svg")){var V=t.getElementsByTagName("noscript")[0],W=V.childNodes[0].data;t.head.innerHTML+=W}var z=function(){return e.addEventListener?"ontouchstart"in e?"touchstart":"click":"click"},J=function(){return"click"},U=function(t){M.setAttribute("data-state","visible"===M.getAttribute("data-state")?"hidden":"visible"),this.setAttribute("data-state","open"===this.getAttribute("data-state")?"closed":"open"),"open"===this.getAttribute("data-state")&&O?(A(k,"white"),A(C,"white")):O&&(E(k,"white"),E(C,"white")),"open"===this.getAttribute("data-state")?clearInterval($):"/"===e.location.pathname&&s(),t.preventDefault()};T(D,z(),U);for(var Z=function(e){var t=this.getAttribute("href");N.innerHTML="",M&&(M.setAttribute("data-state","hidden"),D.setAttribute("data-state","hidden")),w(t),a(t),e.preventDefault()},Q=M.querySelectorAll(".menu-nav li a"),Y=0;Y<Q.length;Y++)T(Q[Y],z(),Z);for(var et=j.querySelectorAll("li a"),tt=_.querySelectorAll("li a"),Y=0;Y<et.length;Y++)T(et[Y],z(),Z);for(var Y=0;Y<tt.length;Y++)T(tt[Y],z(),Z);var nt=t.getElementById("js-get-in-touch");nt&&T(nt,z(),Z),(e.location.pathname.match(/portfolio/)||"/"===e.location.pathname)&&n();var ot=function(e){clearInterval($),A(q,"boom"),setTimeout(function(){y(25,H),c(P,"next")},700),e.preventDefault()},at=function(e){clearInterval($),A(q,"boom"),setTimeout(function(){y(25,H),c(P,"previous")},700),e.preventDefault()};e.addEventListener&&e.addEventListener("keyup",function(n){if("/"===e.location.pathname){if(38===n.keyCode||40===n.keyCode){var o=t.getElementById("js-project-link");a(o.getAttribute("href"))}39===n.keyCode&&(clearInterval($),A(q,"boom"),setTimeout(function(){y(25,H),c(P,"next")},700)),37===n.keyCode&&(clearInterval($),A(q,"boom"),setTimeout(function(){y(25,H),c(P,"previous")},700)),n.preventDefault()}},!1),o(),Fluidvids.init({selector:"iframe",players:["www.youtube.com","player.vimeo.com"]}),setTimeout(function(){E(q,"boom")},100),e.addEventListener&&(f(),e.addEventListener("orientationchange",function(){f()},!1));var it=t.querySelectorAll(".portfolio-item__header")[0];if(it&&"/contact"!=e.location.pathname&&(it.innerHTML+='<a class="arrow-down" href="#jump" id="jump"></a>',i()),"/portfolio"===e.location.pathname||"/about"===e.location.pathname||"/index.html"===e.location.pathname||"/"===e.location.pathname||"/about/"===e.location.pathname)for(var lt=t.querySelectorAll(".portfolio-list li img"),Y=0;Y<lt.length;Y++)g(lt[Y],80*Y);if(e.location.pathname.match(/portfolio/)||"/about"===e.location.pathname||"/"===e.location.pathname||"/about/"===e.location.pathname){var rt=0,st=0,ct=0;lt=N.querySelectorAll("img"),rt=lt.length,st=Math.ceil(100/rt);for(var Y=0;Y<lt.length;Y++)ct+=st,y(ct,H),m(lt[Y],80*Y,ct)}e.addEventListener&&e.addEventListener("popstate",function(){var t=!F&&location.href==K;F=!0,t||("/"===location.pathname&&(e.location.href="/"),a(location.pathname))},!1)}(window,document);